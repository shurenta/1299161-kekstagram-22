{"version":3,"sources":["webpack://kekstagram/./source/js/dawnload-photo.js","webpack://kekstagram/webpack/bootstrap","webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/modal-photo.js","webpack://kekstagram/./source/js/zoom-photo.js","webpack://kekstagram/./source/js/generate-effect.js","webpack://kekstagram/./source/js/validation-form.js","webpack://kekstagram/./source/js/get-data-form.js","webpack://kekstagram/./source/js/generate-data.js","webpack://kekstagram/./source/js/photo-preview.js","webpack://kekstagram/./source/js/filter.js","webpack://kekstagram/./source/js/main.js"],"names":["FILE_TYPES","fileDownload","document","querySelector","addEventListener","img","imgFile","files","imgName","name","toLowerCase","some","it","endsWith","reader","FileReader","loadPhoto","src","result","readAsDataURL","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","isEscEvent","evt","key","buttonShowKomments","generateSocialAmount","comments","querySelectorAll","textContent","length","commentsList","closeModalPhoto","body","classList","add","remove","removeEventListener","onPopupEscKeydown","clearDataComments","innerHTML","scaleControlSmaller","scaleControlBigger","scaleControlValue","imgUploadPreview","value","SCALE_CONTROL_MAX","numberValue","Number","parseInt","disabled","transform","style","effectLevel","sliderElement","effectLevelValue","openEditor","closeEditor","imgUploadOverlay","effectsList","hashtagInput","commentArea","onEditorEscKeydown","closeUploadOverlay","noUiSlider","off","create","range","min","max","start","step","connect","effects","none","sliderSettings","getFilterStyle","chrome","effectValue","sepia","marvin","phobos","heat","effect","target","updateOptions","on","_","handle","unencoded","filter","valueLength","hashtagValue","split","hashteg","regex","setCustomValidity","borderColor","test","loop","i","k","reportValidity","main","addErrorMessage","elementError","content","cloneNode","appendChild","closeErrorModal","onMessageErrorEscKeydown","closeSuccessModal","onMessageSuccessEscKeydown","onSuccess","className","preventDefault","formData","FormData","fetch","method","then","response","ok","elementSuccess","addSuccessMessage","catch","fillPhotos","photos","containerPhoto","templatePreviewPhoto","fragmentSimilarPhoto","createDocumentFragment","forEach","url","likes","id","elementPhoto","templateImgPhoto","setAttribute","ACTIVE_CLASS","deleteMiniPhoto","miniPhoto","parentNode","removeChild","photosPromise","json","openModalPhoto","photo","dataset","find","getPhoto","description","renderBigPhoto","modalPhoto","miniPhotoLikes","nextElementSibling","renderQuantityLikesBigPhoto","commentsBigPhoto","commentsArray","renderQuantityCommentsBigPhoto","templateCommentsItem","similarFragmentComment","startComments","andComments","dawnloadComments","slice","avatar","message","elementComment","templateAvatarComment","alt","renderDataCommentsBigPhoto","filtersButton","renderFilteredPhotos","debounce","photosCopyRandom","sort","Math","random","getRandomPhoto","photosCopy","a","b","sortCommentsPhoto","filterButton"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\nconst fileDownload = document.querySelector('#upload-file');\n\nconst dawnoladFile = () => {\n  const containerImage = document.querySelector('.img-upload__preview');\n  const img = containerImage.querySelector('img');\n  const imgFile = fileDownload.files[0];\n  const imgName = imgFile.name.toLowerCase();\n  const matches = FILE_TYPES.some((it) => {\n    return imgName.endsWith(it);\n  });\n  if (matches) {\n    const reader = new FileReader();\n    const loadPhoto = () => {\n      img.src = reader.result;\n    }\n    reader.addEventListener('load', loadPhoto);\n    reader.readAsDataURL(imgFile);\n  }\n}\nfileDownload.addEventListener('change', dawnoladFile);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","//проверка нажатия на клавишу Esc\nconst isEscEvent = (evt) => {\n  return evt.key === ('Escape' || 'Esc');\n};\n\n\n// Функция  возвращающая случайное значение\nlet getRandomArrayElement = (array) => {\n  let randomNumber = Math.floor(Math.random() * array.length);\n  return array[randomNumber];\n}\nexport {isEscEvent, getRandomArrayElement};\n","import './photo-preview.js';\nimport {isEscEvent} from './util.js';\nconst buttonShowKomments = document.querySelector('.comments-loader');\n\n// генерирует счетки загруженных кометариев\nconst  generateSocialAmount = () => {\n  const comments = document.querySelectorAll('.social__comment');\n  const commentsAmount = document.querySelector('.social__amount');\n  commentsAmount.textContent = comments.length;\n}\n\n\nconst generateModalPhoto = (photos) => {\n  //ищет id элемента по которому кликнули\n  const getPhoto = (evt) => {\n    const id = evt.target.dataset.id;\n    return photos.find(img => img.id === Number(id));\n  }\n\n\n  //открывает модольное окно\n  const openModalPhoto = (evt) => {\n    const photo = getPhoto(evt);\n    renderBigPhoto(photo);\n    const modalPhoto = document.querySelector('.big-picture');\n    const body = document.querySelector('body');\n    modalPhoto.classList.remove('hidden');\n    body.classList.add('modal-open');\n    renderQuantityLikesBigPhoto(evt);\n    renderQuantityCommentsBigPhoto(photo);\n    renderDataCommentsBigPhoto(photo);\n    generateSocialAmount();\n    document.addEventListener('keydown', onPopupEscKeydown);\n  }\n  const onContainerMiniPhotos = document.querySelector('.pictures');\n  onContainerMiniPhotos.addEventListener('click', (evt) => {\n    if (evt.target.className === 'picture__img') {\n      openModalPhoto(evt);\n    }\n  });\n}\n//подставляет фото и описание\nconst renderBigPhoto = (photo) => {\n  const bigImgContainer = document.querySelector('.big-picture__img');\n  const bigImg = bigImgContainer.querySelector('img');\n  bigImg.src = photo.url;\n  //подстовляет описание фото\n  const descriptionBigPhoto = document.querySelector('.social__caption');\n  descriptionBigPhoto.textContent = photo.description;\n}\n\n\n//подставляет данные в список коментариев\nconst commentsList = document.querySelector('.social__comments');\nconst renderDataCommentsBigPhoto = (photo) => {\n  const commentsArray = photo.comments;\n  const templateCommentsItem = document.querySelector('#comment').content;\n  const similarFragmentComment = document.createDocumentFragment();\n  let startComments = 0;\n  let andComments = 5;\n  //отрисовка начальных пяти комментов\n  const dawnloadComments = () => {\n    commentsArray.slice(startComments, andComments).forEach(({avatar, message, name}) => {\n      const elementComment = templateCommentsItem.cloneNode(true);\n      const templateAvatarComment = elementComment.querySelector('.social__picture');\n      templateAvatarComment.src = avatar;\n      templateAvatarComment.alt = name;\n      const templateTextComment = elementComment.querySelector('.social__text');\n      templateTextComment.textContent = message;\n      similarFragmentComment.appendChild(elementComment);\n    });\n    commentsList.appendChild(similarFragmentComment);\n    const comments = document.querySelectorAll('.social__comment');\n    if (Number(comments.length) === Number(commentsArray.length)) {\n      buttonShowKomments.classList.add('hidden');\n    }\n    generateSocialAmount();\n  }\n  dawnloadComments();\n  // по клику меняются значения для метода slice\n  const showComments = () => {\n    startComments =  startComments + 5;\n    andComments = andComments + 5;\n    dawnloadComments();\n  }\n  buttonShowKomments.addEventListener('click', showComments);\n}\n\n\n\n//подставляет колличество коментариев в попап\nconst renderQuantityCommentsBigPhoto = (photo) => {\n  const modalPhoto = document.querySelector('.big-picture');\n  const commentsBigPhoto = modalPhoto.querySelector('.comments-count');\n  const commentsArray = photo.comments;\n  commentsBigPhoto.textContent = commentsArray.length;\n}\n\n\n//подставляет колличество лайков в попап\nconst renderQuantityLikesBigPhoto = (evt) => {\n  const thisObjekt = evt.target;\n  const miniPhotoInfo = thisObjekt.nextElementSibling;\n  const miniPhotoLikes = miniPhotoInfo.querySelector('.picture__likes');\n  const bigPhotoLikes = document.querySelector('.likes-count');\n  bigPhotoLikes.textContent = miniPhotoLikes.textContent;\n}\n\n\n\n// закрываем окно\nconst closeModalPhoto = () => {\n  const body = document.querySelector('body');\n  const modalPhoto = document.querySelector('.big-picture');\n  modalPhoto.classList.add('hidden');\n  body.classList.remove('modal-open');\n  document.removeEventListener('keydown', onPopupEscKeydown);\n  buttonShowKomments.classList.remove('hidden');\n  clearDataComments();\n}\n\n\n//Закрытие окна клавишей Esc\nconst onPopupEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    closeModalPhoto();\n  }\n}\n\n//очищает данные коментариев после закртия поапа\nconst clearDataComments = () => {\n  commentsList.innerHTML = '';\n}\n\nconst onButtonCloseModal = document.querySelector('.big-picture__cancel');\nonButtonCloseModal.addEventListener('click', closeModalPhoto);\nexport {generateModalPhoto};\n","const SCALE_CONTROL_MIN = 25;\nconst SCALE_CONTROL_MAX = 100;\nconst SCALE_CONTROL_STEP = 25;\nconst scaleControlSmaller = document.querySelector('.scale__control--smaller');\nconst scaleControlBigger = document.querySelector('.scale__control--bigger');\nconst scaleControlValue = document.querySelector('.scale__control--value');\nconst uploadPreview = document.querySelector('.img-upload__preview');\nconst imgUploadPreview = uploadPreview.querySelector('img');\nscaleControlValue.value = SCALE_CONTROL_MAX + '%';\nlet numberValue = Number.parseInt(scaleControlValue.value);\nscaleControlBigger.disabled = true;\n\n//увиличивает или уменьшает фото\nconst transform = () => {\n  imgUploadPreview.style.transform = 'scale(' + numberValue / SCALE_CONTROL_MAX + ')';\n  scaleControlSmaller.disabled = numberValue <= SCALE_CONTROL_MIN;\n  scaleControlBigger.disabled = numberValue >= SCALE_CONTROL_MAX;\n  scaleControlValue.value = numberValue + '%';\n}\n\n// Уменьшает значение\nconst setScaleMinImg = () => {\n  scaleControlBigger.disabled = false;\n  numberValue = numberValue - SCALE_CONTROL_STEP;\n  transform();\n}\n\n// Увеличивает значение\nconst setScaleMaxImg = () => {\n  scaleControlSmaller.disabled = false;\n  numberValue = numberValue +  SCALE_CONTROL_STEP;\n  transform();\n}\n\n//сбрасывает значение импута и кнопок к ночальному состоянию при открии окна\nconst resetValueInput = () => {\n  scaleControlValue.value = SCALE_CONTROL_MAX + '%';\n  numberValue = Number.parseInt(scaleControlValue.value);\n  scaleControlSmaller.disabled = false;\n  scaleControlBigger.disabled = true;\n}\n\nscaleControlSmaller.addEventListener('click', setScaleMinImg);\nscaleControlBigger.addEventListener('click', setScaleMaxImg);\nexport {imgUploadPreview, resetValueInput, scaleControlValue};\n","/*global noUiSlider*/\nimport {isEscEvent} from './util.js';\nimport {imgUploadPreview, resetValueInput} from './zoom-photo.js';\nconst effectLevel = document.querySelector('.effect-level');\nconst sliderElement = document.querySelector('.effect-level__slider');\nconst effectLevelValue = document.querySelector('.effect-level__value');\nconst openEditor = document.querySelector('#upload-file');\nconst closeEditor = document.querySelector('#upload-cancel');\nconst imgUploadOverlay = document.querySelector('.img-upload__overlay');\nconst effectsList = document.querySelector('.effects__list');\nconst body = document.querySelector('body');\nconst hashtagInput = document.querySelector('.text__hashtags');\nconst commentArea = document.querySelector('.text__description');\n\n//Открытие формы редактирования\nconst openUploadOverlay = () => {\n  imgUploadOverlay.classList.remove('hidden');\n  body.classList.add('modal-open');\n  effectLevel.classList.add('hidden');\n  document.addEventListener('keydown', onEditorEscKeydown);\n}\nopenEditor.addEventListener('click', openUploadOverlay);\n\n\n//Закрытие формы редактирования\nconst closeUploadOverlay = () => {\n  imgUploadOverlay.classList.add('hidden');\n  body.classList.remove('modal-open');\n  document.removeEventListener('keydown', onEditorEscKeydown);\n  imgUploadPreview.style = '';\n  resetValueInput();\n  sliderElement.noUiSlider.off();\n  hashtagInput.value = '';\n  commentArea.value= '';\n}\ncloseEditor.addEventListener('click', closeUploadOverlay);\n\n//Закрытие окна клавишей Esc\nconst onEditorEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    closeUploadOverlay();\n  }\n}\n\n//отрисовка слайдера\nnoUiSlider.create(sliderElement, {\n  range: {\n    min: 0,\n    max: 1,\n  },\n  start: 1,\n  step: 0.1,\n  connect: 'lower',\n});\n\n//'настройки слайдера для разных эффектов'\nconst effects = {\n  none: {\n    sliderSettings: {\n\n    },\n    getFilterStyle: () => imgUploadPreview.style = '',\n  },\n\n  chrome: {\n    sliderSettings: {\n      range: {\n        min: 0,\n        max: 1,\n      },\n      start: 1,\n      step: 0.1,\n    },\n    getFilterStyle: (effectValue) => 'grayscale(' + Number(effectValue) + ')',\n  },\n\n  sepia: {\n    sliderSettings: {\n      range: {\n        min: 0,\n        max: 1,\n      },\n      start: 1,\n      step: 0.1,\n    },\n    getFilterStyle: (effectValue) => 'sepia(' + Number(effectValue) + ')',\n  },\n\n  marvin: {\n    sliderSettings: {\n      range: {\n        min: 0,\n        max: 100,\n      },\n      start: 100,\n      step: 1,\n    },\n    getFilterStyle: (effectValue) => 'invert(' + Number(effectValue) + '%' + ')',\n  },\n\n  phobos: {\n    sliderSettings: {\n      range: {\n        min: 0,\n        max: 3,\n      },\n      start: 3,\n      step: 0.1,\n    },\n    getFilterStyle: (effectValue) => 'blur(' + Number(effectValue) + 'px' + ')',\n  },\n\n  heat: {\n    sliderSettings: {\n      range: {\n        min: 1,\n        max: 3,\n      },\n      start: 3,\n      step: 0.1,\n    },\n    getFilterStyle: (effectValue) => 'brightness(' + Number(effectValue) + ')',\n  },\n}\n\neffectsList.addEventListener('change', (evt) => {\n  sliderElement.noUiSlider.off();\n  const effect = evt.target.value;\n  sliderElement.noUiSlider.updateOptions(effects[effect].sliderSettings)\n  effectLevel.classList.remove('hidden');\n  if (effect === 'none') {\n    effectLevel.classList.add('hidden');\n  }\n\n  sliderElement.noUiSlider.on('update', (_, handle, unencoded) => {\n    effectLevelValue.value = unencoded[handle];\n    imgUploadPreview.style.filter = effects[effect].getFilterStyle(effectLevelValue.value);\n  });\n});\nexport {onEditorEscKeydown, closeUploadOverlay};\n","import './modal-photo.js';\nimport './zoom-photo.js';\nimport './generate-effect.js';\nimport {onEditorEscKeydown} from './generate-effect.js';\n\nconst MIN_NAME_HASHTAG = 2;\nconst MAX_NAME_HASHTAG = 20;\n\nconst hashtagInput = document.querySelector('.text__hashtags');\nconst commentArea = document.querySelector('.text__description');\n\nhashtagInput.addEventListener('input', () => {\n  const valueLength = hashtagInput.value.length;\n  const hashtagValue = hashtagInput.value.toLowerCase().split(' ');\n  for (let hashteg of hashtagValue) {\n    const regex = /^#[a-zA-Z0-9]+/;\n    if (valueLength < MIN_NAME_HASHTAG) {\n      hashtagInput.setCustomValidity('Ещё ' + (MIN_NAME_HASHTAG - valueLength) +' симв.');\n      hashtagInput.style.borderColor = 'red';\n      break;\n    }\n    hashtagInput.style.borderColor = 'black';\n    if (hashteg[0] !== '#') {\n      hashtagInput.setCustomValidity('Имя должно начинаться с #');\n      hashtagInput.style.borderColor = 'red';\n      break;\n    }\n    hashtagInput.style.borderColor = 'black';\n    if (!regex.test(hashteg)) {\n      hashtagInput.setCustomValidity('Должны быть только цифры или буквы');\n      hashtagInput.style.borderColor = 'red';\n      break;\n\n    }\n\n    if (hashteg.length > MAX_NAME_HASHTAG) {\n      hashtagInput.setCustomValidity('Удалите лишние ' + (hashteg.length - MAX_NAME_HASHTAG) +' симв.');\n      hashtagInput.style.borderColor = 'red';\n      break;\n    }\n    hashtagInput.style.borderColor = 'black';\n    if (hashtagValue.length > 5) {\n      hashtagInput.setCustomValidity('может быть только 5ть хэштегов');\n      hashtagInput.style.borderColor = 'red';\n      break;\n    }\n    hashtagInput.style.borderColor = 'black';\n    hashtagInput.setCustomValidity('');\n  }\n  loop:\n  for (let i = 0; i < hashtagValue.length; i++) {\n    for (let k = i+1; k < hashtagValue.length; k++) {\n      if (hashtagValue[i] === hashtagValue[k]) {\n        hashtagInput.style.borderColor = 'red';\n        hashtagInput.setCustomValidity('дубликат');\n        break loop;\n      }\n      hashtagInput.style.borderColor = 'black';\n    }\n  }\n\n  hashtagInput.reportValidity();\n});\n\n\nconst deleteEventKeydownHashtag = () => {\n  document.removeEventListener('keydown', onEditorEscKeydown);\n}\nhashtagInput.addEventListener('focus', deleteEventKeydownHashtag);\n\nconst addEventKeydownHashtag = () => {\n  document.addEventListener('keydown', onEditorEscKeydown);\n}\nhashtagInput.addEventListener('blur', addEventKeydownHashtag);\n\n\nconst deleteEventKeydownComment = () => {\n  document.removeEventListener('keydown', onEditorEscKeydown);\n}\ncommentArea.addEventListener('focus', deleteEventKeydownComment);\n\nconst addEventKeydownComment = () => {\n  document.addEventListener('keydown', onEditorEscKeydown);\n}\ncommentArea.addEventListener('blur', addEventKeydownComment);\n","import {closeUploadOverlay} from './generate-effect.js';\nimport {isEscEvent} from './util.js';\nconst main = document.querySelector('main');\n\n//добовлят сообщение об ошибке и закрвает его.\nconst addErrorMessage = () => {\n  const templateError = document.querySelector('#error').content;\n  const elementError = templateError.cloneNode(true);\n  main.appendChild(elementError);\n  const closeErrorButton = main.querySelector('.error__button');\n  closeErrorButton.addEventListener('click', closeErrorModal);\n  document.addEventListener('keydown', onMessageErrorEscKeydown);\n}\n\n//закрывает окно ошибки при клике на кнопку\nconst closeErrorModal = () => {\n  const sectionError = document.querySelector('.error');\n  sectionError.remove();\n  document.removeEventListener('keydown', onMessageErrorEscKeydown);\n}\n\n//закрывает оконо ошибки отправки при нажатии Esc\nconst onMessageErrorEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    closeErrorModal();\n    document.removeEventListener('keydown', onMessageErrorEscKeydown);\n  }\n}\n\n\n//добовляет окно успешной отправки\nconst addSuccessMessage = () => {\n  const templateSuccess = document.querySelector('#success').content;\n  const elementSuccess = templateSuccess.cloneNode(true);\n  main.appendChild(elementSuccess);\n  const closeSuccessButton = main.querySelector('.success__button');\n  closeSuccessButton.addEventListener('click', closeSuccessModal);\n  document.addEventListener('keydown', onMessageSuccessEscKeydown);\n}\n\n//закрывает окно успешной отправки при клике на кнопку\nconst closeSuccessModal = () => {\n  const sectionSuccess = document.querySelector('.success');\n  sectionSuccess.remove();\n  document.removeEventListener('keydown', onMessageSuccessEscKeydown);\n}\n\n\n//закрывает коно успешной отправки при нажатии Esc\nconst onMessageSuccessEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    closeSuccessModal();\n    document.removeEventListener('keydown', onMessageSuccessEscKeydown);\n  }\n}\n// закрывает окно сообщения при клике в любой области\nconst closeModalMessage = (evt) => {\n  if (evt.target.className === 'error') {\n    closeErrorModal();\n  }\n  if (evt.target.className === 'success') {\n    closeSuccessModal();\n  }\n}\nmain.addEventListener('click', closeModalMessage);\n\n\n\n//отправка данных с формы\nconst setUserFormSubmit = (onSuccess) => {\n  const uploadForm = document.querySelector('.img-upload__form');\n  uploadForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n    const formData = new FormData(evt.target);\n\n    fetch(\n      'https://22.javascript.pages.academy/kekstagram',\n      {\n        method: 'POST',\n        body: formData,\n      },\n    )\n      .then((response) => {\n        if (response.ok) {\n          addSuccessMessage();\n          onSuccess();\n        } else {\n          addErrorMessage();\n          closeUploadOverlay();\n        }\n      })\n      .catch(() => {\n        addErrorMessage();\n        closeUploadOverlay();\n      });\n  });\n}\nsetUserFormSubmit(closeUploadOverlay);\n","const getData = () => {\n  return fetch('https://22.javascript.pages.academy/kekstagram/data')\n    .then((response) => response.json())\n};\n\nexport {getData};\n","const fillPhotos = (photos) => {\n  const containerPhoto = document.querySelector('.pictures');\n  const templatePreviewPhoto = document.querySelector('#picture').content;\n  const fragmentSimilarPhoto = document.createDocumentFragment();\n  photos.forEach(({url, comments, likes, id}) => {\n    const elementPhoto = templatePreviewPhoto.cloneNode(true);\n\n    const templateImgPhoto = elementPhoto.querySelector('.picture__img');\n    templateImgPhoto.src = url;\n    templateImgPhoto.setAttribute('data-id', id);\n\n\n    const templateCommentsPhoto = elementPhoto.querySelector('.picture__comments');\n    templateCommentsPhoto.textContent = comments.length;\n\n\n    const templateLikesPhoto = elementPhoto.querySelector('.picture__likes');\n    templateLikesPhoto.textContent = likes;\n\n    fragmentSimilarPhoto.appendChild(elementPhoto);\n  });\n  containerPhoto.appendChild(fragmentSimilarPhoto);\n}\nexport {fillPhotos};\n","/* global _:readonly */\nimport {fillPhotos} from './photo-preview.js';\nconst ACTIVE_CLASS = 'img-filters__button--active';\nconst FILTER_RANDOM = 'filter-random';\nconst FILTER_DISCUSSED = 'filter-discussed';\nconst FILTER_DEFAULT = 'filter-default';\n\nconst deleteMiniPhoto = () => {\n  const miniPhoto = document.querySelectorAll('.picture');\n  miniPhoto.forEach((miniPhoto) => {\n    miniPhoto.parentNode.removeChild(miniPhoto);\n  })\n}\n\nconst initFilters = (photos) => {\n  const showFilter = document.querySelector('.img-filters--inactive');\n  showFilter.classList.remove('img-filters--inactive');\n  const filtersButton = document.querySelectorAll('.img-filters__button')\n  const getRandomPhoto = () => {\n    const photosCopyRandom = photos.filter(() => 1)\n    photosCopyRandom.sort(() => {\n      return 0.5 - Math.random();\n    });\n    deleteMiniPhoto();\n    fillPhotos(photosCopyRandom.slice(photosCopyRandom,10));\n  }\n\n\n  const getDefaultPhoto = () => {\n    deleteMiniPhoto();\n    fillPhotos(photos);\n  }\n\n\n  const sortCommentsPhoto = () => {\n    deleteMiniPhoto();\n    const photosCopy = photos.filter(() => 1)\n    photosCopy.sort((a, b) => a.comments < b.comments ? 1 : -1);\n    fillPhotos(photosCopy);\n  }\n\n  const renderFilteredPhotos = _.debounce((evt) => {\n    switch (evt.target.id) {\n      case  FILTER_RANDOM:\n        return getRandomPhoto();\n      case FILTER_DISCUSSED:\n        return sortCommentsPhoto();\n      case FILTER_DEFAULT:\n        return getDefaultPhoto();\n    }\n  }, 500)\n\n  filtersButton.forEach((filterButton) => {\n    filterButton.addEventListener('click', (evt) => {\n      document.querySelector(`.${ACTIVE_CLASS}`).classList.remove(ACTIVE_CLASS)\n      filterButton.classList.add(ACTIVE_CLASS)\n      renderFilteredPhotos(evt);\n    })\n  })\n}\nexport {initFilters}\n","import './validation-form.js';\nimport './get-data-form.js';\nimport './filter.js';\nimport './dawnload-photo.js';\nimport {getData} from './generate-data.js';\nimport {initFilters} from './filter.js';\nimport {fillPhotos} from './photo-preview.js';\nimport {generateModalPhoto} from './modal-photo.js';\nconst photosPromise = getData()\nphotosPromise.then(fillPhotos)\nphotosPromise.then(generateModalPhoto)\nphotosPromise.then(initFilters)\n"],"sourceRoot":""}